{% load static %}
{#{% extends 'base.html' %}#}
{##}
{#{% block content %}#}
{#    <div class="product-detail">#}
{#        <h1>{{ product.name }}</h1>#}
{#        <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">#}
{#        <p><strong>Description:</strong> {{ product.description }}</p>#}
{#        <p><strong>Price:</strong> ${{ product.price }}</p>#}
{#        <p><strong>Quantity Available:</strong> {{ product.quantity }}</p>#}
{##}
{#        <!-- Display Ratings -->#}
{#        <div class="ratings">#}
{#            <h2>Ratings:</h2>#}
{#            {% for rating in ratings %}#}
{#                <div class="rating">#}
{#                    <strong>{{ rating.user.username }}</strong> rated this product:#}
{#                    <strong>{{ rating.rating }} stars</strong>#}
{#                    {% if rating.comment %}#}
{#                        <p>{{ rating.comment }}</p>#}
{#                    {% endif %}#}
{#                </div>#}
{#            {% empty %}#}
{#                <p>No ratings yet.</p>#}
{#            {% endfor %}#}
{#        </div>#}
{##}
{#        <!-- Rating Form (Only for logged-in users) -->#}
{#        {% if user.is_authenticated %}#}
{#            <h2>Add a Rating:</h2>#}
{#            <form method="POST">#}
{#                {% csrf_token %}#}
{#                {{ form.as_p }}#}
{#                <button type="submit" class="btn btn-primary">Submit Rating</button>#}
{#            </form>#}
{#        {% else %}#}
{#            <p>You must be logged in to rate this product.</p>#}
{#        {% endif %}#}
{#    </div>#}
{#{% endblock %}#}


{#{% extends 'base.html' %}#}
{##}
{#{% block content %}#}
{#<div class="container py-5">#}
{#    <div class="row">#}
{#        <div class="col-md-6">#}
{#            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded">#}
{#        </div>#}
{#        <div class="col-md-6">#}
{#            <h2>{{ product.name }}</h2>#}
{#            <p><strong>Description:</strong> {{ product.description }}</p>#}
{#            <p><strong>Price:</strong> ${{ product.price }}</p>#}
{#            <p><strong>Quantity Available:</strong> {{ product.quantity }}</p>#}
{##}
{#            <!-- Display Ratings -->#}
{#            <div class="ratings">#}
{#                <h3>Ratings:</h3>#}
{#                {% if ratings %}#}
{#                    <p>Average Rating: {{ avg_rating }}/5</p>#}
{#                    <p>#}
{#                        {% for i in "12345"|slice:":5" %}#}
{#                            <i class="fa {% if i|add:0 <= avg_rating %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>#}
{#                        {% endfor %}#}
{#                    </p>#}
{##}
{#                    <!-- List of user ratings -->#}
{#                    {% for rating in ratings %}#}
{#                        <div class="rating">#}
{#                            <strong>{{ rating.user.username }}</strong> rated this product:#}
{#                            <strong>{{ rating.rating }} stars</strong>#}
{#                            {% if rating.comment %}#}
{#                                <p>{{ rating.comment }}</p>#}
{#                            {% endif %}#}
{#                        </div>#}
{#                    {% empty %}#}
{#                        <p>No ratings yet.</p>#}
{#                    {% endfor %}#}
{#                {% else %}#}
{#                    <p>No ratings yet.</p>#}
{#                {% endif %}#}
{#            </div>#}
{##}
{#            <!-- Rating Form (Only for logged-in users) -->#}
{#            {% if user.is_authenticated %}#}
{#                <h4>Add a Rating:</h4>#}
{#                <form method="POST" action="{% url 'cerealconnect:rate-product' product.id %}">#}
{#                    {% csrf_token %}#}
{#                    <div class="form-group">#}
{#                        <label for="rating">Choose Rating:</label>#}
{#                        <select name="rating" id="rating" class="form-control">#}
{#                            <option value="1">1 Star</option>#}
{#                            <option value="2">2 Stars</option>#}
{#                            <option value="3">3 Stars</option>#}
{#                            <option value="4">4 Stars</option>#}
{#                            <option value="5">5 Stars</option>#}
{#                        </select>#}
{#                    </div>#}
{#                    <div class="form-group">#}
{#                        <label for="comment">Your Comment:</label>#}
{#                        <textarea name="comment" id="comment" class="form-control" rows="3"></textarea>#}
{#                    </div>#}
{#                    <button type="submit" class="btn btn-primary">Submit Rating</button>#}
{#                </form>#}
{#            {% else %}#}
{#                <p>You must be logged in to rate this product.</p>#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
{#</div>#}
{#{% endblock %}#}


{#{% load custom_filters %}#}
{#{% block content %}#}
{#<div class="container">#}
{#    <h1>{{ product.name }}</h1>#}
{#    <p>{{ product.description }}</p>#}
{#    <p>Price: {{ product.price|currency }}</p>#}
{##}
{#    <!-- Display the average rating -->#}
{#    <div class="product-rating">#}
{#        <p>Average Rating:</p>#}
{#        {% if average_rating %}#}
{#            <p>{{ average_rating|floatformat:1 }} / 5</p>#}
{#        {% else %}#}
{#            <p>No ratings yet for this product.</p>#}
{#        {% endif %}#}
{##}
{#        <!-- Display star icons based on ratings -->#}
{#        {% for i in product.ratings.all %}#}
{#            <i class="fa {% if i.rating <= average_rating %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>#}
{#        {% endfor %}#}
{#    </div>#}
{##}
{#    <!-- Form for submitting a rating -->#}
{#    {% if user.is_authenticated %}#}
{#        <h3>Rate this Product:</h3>#}
{#        <form method="post">#}
{#            {% csrf_token %}#}
{#            {{ form.as_p }}#}
{#            <button type="submit" class="btn btn-primary">Submit Rating</button>#}
{#        </form>#}
{#    {% else %}#}
{#        <p>You need to be logged in to rate this product.</p>#}
{#    {% endif %}#}
{##}
{#    <!-- Display Ratings from Other Users -->#}
{#    <h3>Ratings from Other Users:</h3>#}
{#    {% if ratings %}#}
{#        <ul>#}
{#            {% for rating in ratings %}#}
{#                <li>{{ rating.user.username }} rated it {{ rating.rating }} stars ({{ rating.created_at|date:"Y-m-d H:i" }})</li>#}
{#            {% endfor %}#}
{#        </ul>#}
{#    {% else %}#}
{#        <p>No ratings yet for this product.</p>#}
{#    {% endif %}#}
{#</div>#}
{#{% endblock %}#}

{##}
{#{% load custom_filters %}#}
{#{% block content %}#}
{#<div class="container py-5">#}
{#    <!-- Product Header -->#}
{#    <div class="row align-items-center">#}
{#        <div class="col-md-6">#}
{#            <!-- Product Name -->#}
{#            <h1 class="text-primary font-weight-bold">{{ product.name }}</h1>#}
{#            <!-- Product Description -->#}
{#            <p class="lead text-muted">{{ product.description }}</p>#}
{#            <!-- Product Price -->#}
{#            <h4 class="text-success">Price: {{ product.price|currency }}</h4>#}
{#        </div>#}
{#        <div class="col-md-6 text-center">#}
{#            <!-- Placeholder or Product Image -->#}
{#            {% if product.image %}#}
{#                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded shadow-lg hover-zoom" style="max-height: 300px;">#}
{#            {% else %}#}
{#                <img src="{% static 'images/image2.jpg' %}" alt="No Image Available" class="img-fluid rounded shadow-lg" style="max-height: 300px;">#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
{##}
{#    <!-- Product Rating Section -->#}
{#    <div class="mt-5">#}
{#        <h3 class="text-primary">Average Rating:</h3>#}
{#        <div class="product-rating d-flex align-items-center mb-3">#}
{#            {% if average_rating %}#}
{#                <!-- Display star icons based on ratings -->#}
{#                <div>#}
{#                    {% for i in 1|to:6 %}#}
{#                        <i class="fa {% if i <= average_rating|round %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>#}
{#                    {% endfor %}#}
{#                </div>#}
{#                <span class="ml-3 font-weight-bold text-muted">{{ average_rating|floatformat:1 }} / 5</span>#}
{#            {% else %}#}
{#                <p class="text-muted">No ratings yet for this product.</p>#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
{##}
{#    <!-- Rate Product Form -->#}
{#    {% if user.is_authenticated %}#}
{#    <div class="mt-4">#}
{#        <h3 class="text-primary">Rate this Product:</h3>#}
{#        <form method="post" class="p-3 bg-light rounded shadow-sm">#}
{#            {% csrf_token %}#}
{#            <div class="form-group">#}
{#                <label for="rating">Select Rating:</label>#}
{#                {{ form.rating|add_class:"form-control w-50" }}#}
{#            </div>#}
{#            <button type="submit" class="btn btn-primary btn-lg">#}
{#                <i class="fa fa-star"></i> Submit Rating#}
{#            </button>#}
{#        </form>#}
{#    </div>#}
{#    {% else %}#}
{#    <div class="mt-4">#}
{#        <p class="text-muted">You need to <a href="{% url 'login' %}" class="text-primary">log in</a> to rate this product.</p>#}
{#    </div>#}
{#    {% endif %}#}
{##}
{#    <!-- User Ratings Section -->#}
{#    <div class="mt-5">#}
{#        <h3 class="text-primary">Ratings from Other Users:</h3>#}
{#        {% if ratings %}#}
{#            <div class="list-group">#}
{#                {% for rating in ratings %}#}
{#                <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">#}
{#                    <div>#}
{#                        <h5 class="mb-1">{{ rating.user.username }}</h5>#}
{#                        <p class="mb-0 text-muted">{{ rating.created_at|date:"Y-m-d H:i" }}</p>#}
{#                    </div>#}
{#                    <div>#}
{#                        {% for i in 1|to:6 %}#}
{#                            <i class="fa {% if i <= rating.rating %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>#}
{#                        {% endfor %}#}
{#                    </div>#}
{#                </div>#}
{#                {% endfor %}#}
{#            </div>#}
{#        {% else %}#}
{#            <p class="text-muted">No ratings yet for this product.</p>#}
{#        {% endif %}#}
{#    </div>#}
{#</div>#}
{#{% endblock %}#}

{#{% load custom_filters %} <!-- Ensure custom_filters is loaded -->#}
{#{% block content %}#}
{#<div class="container py-5">#}
{#    <!-- Product Header -->#}
{#    <div class="row align-items-center">#}
{#        <div class="col-md-6">#}
{#            <!-- Product Name -->#}
{#            <h1 class="text-primary font-weight-bold">{{ product.name }}</h1>#}
{#            <!-- Product Description -->#}
{#            <p class="lead text-muted">{{ product.description }}</p>#}
{#            <!-- Product Price -->#}
{#            <h4 class="text-success">Price: KSh {{ product.price|floatformat:2 }}</h4> <!-- Ensure currency formatting -->#}
{#        </div>#}
{#        <div class="col-md-6 text-center">#}
{#            <!-- Placeholder or Product Image -->#}
{#            {% if product.image %}#}
{#                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded shadow-lg hover-zoom" style="max-height: 300px;">#}
{#            {% else %}#}
{#                <img src="{% static 'images/image2.jpg' %}" alt="No Image Available" class="img-fluid rounded shadow-lg" style="max-height: 300px;">#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
{##}
{#    <!-- Product Rating Section -->#}
{#    <div class="mt-5">#}
{#        <h3 class="text-primary">Average Rating:</h3>#}
{#        <div class="product-rating d-flex align-items-center mb-3">#}
{#            {% if average_rating %}#}
{#                <!-- Display star icons based on ratings -->#}
{#                <div>#}
{#                    {% for i in 1|to:6 %} <!-- Ensure 'to' filter is implemented -->#}
{#                        <i class="fa {% if i <= average_rating|round %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>#}
{#                    {% endfor %}#}
{#                </div>#}
{#                <span class="ml-3 font-weight-bold text-muted">{{ average_rating|floatformat:1 }} / 5</span>#}
{#            {% else %}#}
{#                <p class="text-muted">No ratings yet for this product.</p>#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
{##}
{#    <!-- Rate Product Form -->#}
{#    {% if user.is_authenticated %}#}
{#    <div class="mt-4">#}
{#        <h3 class="text-primary">Rate this Product:</h3>#}
{#        <form method="post" class="p-3 bg-light rounded shadow-sm">#}
{#            {% csrf_token %}#}
{#            <div class="form-group">#}
{#                <label for="rating">Select Rating:</label>#}
{#                {{ form.rating|add_class:"form-control w-50" }} <!-- Ensure 'add_class' filter is implemented -->#}
{#            </div>#}
{#            <button type="submit" class="btn btn-primary btn-lg">#}
{#                <i class="fa fa-star"></i> Submit Rating#}
{#            </button>#}
{#        </form>#}
{#    </div>#}
{#    {% else %}#}
{#    <div class="mt-4">#}
{#        <p class="text-muted">You need to <a href="{% url 'login' %}" class="text-primary">log in</a> to rate this product.</p>#}
{#    </div>#}
{#    {% endif %}#}
{##}
{#    <!-- User Ratings Section -->#}
{#    <div class="mt-5">#}
{#        <h3 class="text-primary">Ratings from Other Users:</h3>#}
{#        {% if ratings %}#}
{#            <div class="list-group">#}
{#                {% for rating in ratings %}#}
{#                <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">#}
{#                    <div>#}
{#                        <h5 class="mb-1">{{ rating.user.username }}</h5>#}
{#                        <p class="mb-0 text-muted">{{ rating.created_at|date:"Y-m-d H:i" }}</p>#}
{#                    </div>#}
{#                    <div>#}
{#                        {% for i in 1|to:6 %} <!-- Ensure 'to' filter is implemented -->#}
{#                            <i class="fa {% if i <= rating.rating %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>#}
{#                        {% endfor %}#}
{#                    </div>#}
{#                </div>#}
{#                {% endfor %}#}
{#            </div>#}
{#        {% else %}#}
{#            <p class="text-muted">No ratings yet for this product.</p>#}
{#        {% endif %}#}
{#    </div>#}
{#</div>#}
{#{% endblock %}#}

{% load custom_filters %}
{% block content %}
<div class="container py-5">
    <!-- Product Header -->
    <div class="row align-items-center">
        <div class="col-md-12 text-center product-header">
            <h1 class="product-title">
                <i class="fa fa-box-open text-primary"></i> {{ product.name }}
            </h1>
            <p class="lead product-description">
                <i class="fa fa-info-circle text-muted"></i> {{ product.description }}
            </p>
            <h4 class="product-price">
                <i class="fa fa-money-bill-wave text-success"></i> Price: KSh {{ product.price|floatformat:2 }}
            </h4>
        </div>
    </div>

    <!-- Product Rating Section -->
    <div class="mt-5 text-center">
        <h3 class="text-gradient">Average Rating:</h3>
        <div class="product-rating d-flex justify-content-center align-items-center mb-3">
            {% if average_rating %}
                <!-- Display star icons based on ratings -->
                <div class="stars">
                    {% for i in 1|to:6 %}
                        <i class="fa {% if i <= average_rating|round %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>
                    {% endfor %}
                </div>
                <span class="ml-3 text-muted">{{ average_rating|floatformat:1 }} / 5</span>
            {% else %}
                <p class="text-muted">No ratings yet for this product.</p>
            {% endif %}
        </div>
    </div>

    <!-- Rate Product Form -->
    {% if user.is_authenticated %}
    <div class="mt-4">
        <h3 class="text-gradient">Rate this Product:</h3>
        <form method="post" class="p-3 bg-light rounded shadow-sm rate-form">
            {% csrf_token %}
            <div class="form-group">
                <label for="rating">Select Rating:</label>
                {{ form.rating|add_class:"form-control w-50" }}
            </div>
            <button type="submit" class="btn btn-primary btn-lg">
                <i class="fa fa-star"></i> Submit Rating
            </button>
        </form>
    </div>
    {% else %}
    <div class="mt-4">
        <p class="text-muted">You need to <a href="{% url 'login' %}" class="text-primary">log in</a> to rate this product.</p>
    </div>
    {% endif %}

    <!-- User Ratings Section -->
    <div class="mt-5">
        <h3 class="text-gradient">Ratings from Other Users:</h3>
        {% if ratings %}
            <div class="list-group">
                {% for rating in ratings %}
                <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center user-rating">
                    <div>
                        <h5 class="mb-1">{{ rating.user.username }}</h5>
                        <p class="mb-0 text-muted">{{ rating.created_at|date:"Y-m-d H:i" }}</p>
                    </div>
                    <div>
                        {% for i in 1|to:6 %}
                            <i class="fa {% if i <= rating.rating %}fa-star{% else %}fa-star-o{% endif %} text-warning"></i>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-muted">No ratings yet for this product.</p>
        {% endif %}
    </div>
</div>
{% endblock %}

<!-- Include CSS -->
<style>
    /* General styling */
    .container {
        max-width: 1200px;
        margin: auto;
        padding: 2rem;
    }

    .product-header {
        background-color: #f8f9fa;
        padding: 40px 0;
        border-radius: 10px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }

    .product-title {
        font-size: 3rem;
        color: #0044cc;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .product-description {
        font-size: 1.2rem;
        color: #6c757d;
        margin-top: 20px;
    }

    .product-price {
        font-size: 1.5rem;
        color: #28a745;
        margin-top: 20px;
    }

    .product-rating {
        animation: fadeIn 1s ease;
    }

    .text-gradient {
        background: -webkit-linear-gradient(#ff7e5f, #feb47b);
        -webkit-background-clip: text;
        color: transparent;
    }

    .stars i {
        margin: 0 5px;
        font-size: 1.5rem;
    }

    .rate-form {
        background-color: #f7f7f7;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }

    .rate-form .form-group label {
        font-weight: bold;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    .list-group-item {
        background-color: #f9f9f9;
        margin-bottom: 15px;
        border-radius: 10px;
        transition: transform 0.3s ease;
    }

    .list-group-item:hover {
        transform: scale(1.05);
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    .user-rating i {
        margin: 0 5px;
    }

    /* Hover animation for buttons and sections */
    .btn-primary:hover {
        background-color: #0056b3;
        border-color: #004085;
    }

    /* Animation keyframes */
    @keyframes fadeIn {
        0% {
            opacity: 0;
            transform: translateY(50px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Gradient background for price */
    .text-gradient-green {
        background: -webkit-linear-gradient(#0f9b0f, #30c303);
        -webkit-background-clip: text;
        color: transparent;
    }

    .product-rating i {
        color: #ffcc00;
    }
</style>



